---
import Section from '../Section.astro'

import { education } from '@cv'
import { certificates } from '@cv'
---

<Section className={Astro.props.className} title='Education'>
  <ul class='space-y-4 py-3 print:space-y-0'>
    {
      education.map(
        ({ institution, startDate, endDate, area, url, location, studyType }, index) => {
          const startYear = new Date(startDate).getFullYear()
          const endYear = endDate ? new Date(endDate).getFullYear() : 'En cours'
          const years = `${startYear} - ${endYear}`

          return (
            <li class='flex items-baseline group'>
              <div 
                data-tilt
                data-tilt-max="8"
                data-tilt-perspective="900"
                data-tilt-scale="1.02"
                data-tilt-glare="true"
                class="w-full p-4 rounded-lg transition-all duration-300 bg-skin-button-muted/50 hover:bg-skin-muted/80 hover:shadow-lg hover:shadow-skin-hue/10"
              >
                <div class='flex items-start'>
                  <div class="flex-shrink-0 mr-4 mt-1">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full bg-skin-hue/10 text-skin-hue">
                      <svg
                        xmlns='http://www.w3.org/2000/svg'
                        width='20'
                        height='20'
                        viewBox='0 0 24 24'
                        fill='none'
                        stroke='currentColor'
                        stroke-width='2'
                        stroke-linecap='round'
                        stroke-linejoin='round'
                        class='text-skin-hue'>
                        <path d='M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z' />
                        <path d='M22 10v6' />
                        <path d='M6 12.5V16a6 3 0 0 0 12 0v-3.5' />
                      </svg>
                    </div>
                  </div>
                  <div class='flex-1'>
                    <div class='flex flex-col sm:flex-row sm:items-center justify-between gap-2'>
                      <h3 class='text-lg font-semibold text-skin-base group-hover:text-skin-hue transition-colors duration-300'>
                        {institution}
                      </h3>
                      <time class='text-xs font-medium text-skin-muted bg-skin-button-muted px-2 py-1 rounded-full'>
                        {years}
                      </time>
                    </div>
                    <div class='mt-1 text-sm font-medium text-skin-hue'>{studyType}</div>
                    <div class='mt-1 text-sm text-skin-muted'>{area}</div>
                    {location && (
                      <div class='mt-1 flex items-center text-xs text-skin-muted'>
                        <svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='mr-1'>
                          <path d='M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z'/>
                          <circle cx='12' cy='10' r='3'/>
                        </svg>
                        {location}
                      </div>
                    )}
                  </div>
                </div>
              </div>
            </li>
          )
        }
      )
    }
  </ul>
  {
    certificates.length > 0 && (
      <Section className={Astro.props.className} title='Certificates'>
        <ul class='space-y-4 py-3 print:space-y-0'>
          {certificates.map(({ name, date, issuer, url }: { name: string; date: string; issuer: string; url: string }) => {
            const certificateYear = new Date(date).getFullYear()
            return (
              <li class='flex items-baseline'>
                <svg
                  xmlns='http://www.w3.org/2000/svg'
                  width='24'
                  height='24'
                  viewBox='0 0 24 24'
                  fill='none'
                  stroke='currentColor'
                  stroke-width='2'
                  stroke-linecap='round'
                  stroke-linejoin='round'
                  class='mr-2 hidden h-5 w-5 self-start md:inline-block print:hidden text-skin-hue'>
                  <path d='M15 12h-5' />
                  <path d='M15 8h-5' />
                  <path d='M19 17V5a2 2 0 0 0-2-2H4' />
                  <path d='M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3' />
                </svg>
                <div class='relative w-full items-baseline justify-between gap-2'>
                  <h3 class='mr-6 items-baseline gap-x-2 gap-y-0.5 font-medium'>
                    <a
                      class='group flex items-center gap-[6px] text-skin-base decoration-dotted underline-offset-[5px] hover:text-skin-hue hover:underline transition-all sm:hover:cursor-none w-max'
                      href={url || null}
                      target='_blank'>
                      {name}
                    </a>
                  </h3>
                  <div class='text-sm text-skin-muted'>{issuer}</div>
                  <time data-ccursor="lift" class='right-0 top-0 text-xs text-skin-muted md:absolute md:block sm:hover:cursor-none sm:hover:text-skin-hue'>
                    {certificateYear}
                  </time>
                </div>
              </li>
            )
          })}
        </ul>
      </Section>
    )
  }
</Section>
